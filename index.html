<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random PyPI Project</title>
</head>
<body>
    <h1>Random PyPI Project</h1>
    <button id="fetch-project">Get Random Project</button>
    <p id="result"></p>

    <script>
        async function getRandomProject() {
            const url = "https://pypi.org/simple/";
            const headers = {
                "Accept": "application/vnd.pypi.simple.v1+html"
            };

            try {
                const response = await fetch(url, { headers });
                if (response.ok) {
                    const html = await response.text();

                    // Parse HTML to extract project names
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, "text/html");
                    const links = doc.querySelectorAll('a');
                    const projectNames = Array.from(links).map(link => link.textContent);

                    if (projectNames.length > 0) {
                        // Select a random project
                        const randomProject = projectNames[Math.floor(Math.random() * projectNames.length)];
                        const projectUrl = `https://pypi.org/project/${randomProject}/`;
                        
                        // Display the result
                        document.getElementById('result').textContent = projectUrl;
                    } else {
                        document.getElementById('result').textContent = "No projects found.";
                    }
                } else {
                    document.getElementById('result').textContent = `Failed to fetch projects: ${response.status} ${response.statusText}`;
                }
            } catch (error) {
                document.getElementById('result').textContent = `Error: ${error.message}`;
            }
        }

        // Attach click event to the button
        document.getElementById('fetch-project').addEventListener('click', getRandomProject);
    </script>
</body>
</html>

